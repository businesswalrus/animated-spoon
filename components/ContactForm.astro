---
// /components/ContactForm.astro
---
<div class="card border-0 shadow-lg">
  <div class="card-body p-5">
    <h3 class="card-title mb-4" style="font-family: 'Roboto Condensed', sans-serif; color: #B31942;">Contact Us</h3>
    <form id="contactForm">
      <div class="row g-3">
        <div class="col-md-6">
          <label for="name" class="form-label">Your Name</label>
          <input type="text" class="form-control" id="name" required>
        </div>
        <div class="col-md-6">
          <label for="email" class="form-label">Email Address</label>
          <input type="email" class="form-control" id="email" required>
        </div>
        <div class="col-12">
          <label for="subject" class="form-label">Subject</label>
          <select class="form-select" id="subject" required>
            <option value="" selected disabled>Select a subject</option>
            <option value="membership">Membership Information</option>
            <option value="report">Report a Cycling Incident</option>
            <option value="suggestion">Suggest a Campaign</option>
            <option value="media">Media Inquiry</option>
            <option value="other">Other</option>
          </select>
        </div>
        <div class="col-12">
          <label for="message" class="form-label">Your Message</label>
          <textarea class="form-control" id="message" rows="5" required></textarea>
        </div>
        <div class="col-12">
          <div class="form-check">
            <input class="form-check-input" type="checkbox" id="newsCheck">
            <label class="form-check-label" for="newsCheck">
              Subscribe to our newsletter
            </label>
          </div>
        </div>
        <div class="col-12 text-center mt-4">
          <button type="submit" class="btn btn-danger btn-lg px-5">Send Message</button>
        </div>
      </div>
    </form>
    
    <!-- Success message (hidden by default) -->
    <div id="successMessage" class="alert alert-success mt-4 d-none">
      <i class="fas fa-check-circle me-2"></i> Your message has been sent successfully! We'll get back to you soon.
    </div>
  </div>
</div>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    const contactForm = document.getElementById('contactForm');
    const successMessage = document.getElementById('successMessage');
    
    if (contactForm) {
      contactForm.addEventListener('submit', function(e) {
        e.preventDefault();
        
        // Get form data
        const name = document.getElementById('name').value;
        const email = document.getElementById('email').value;
        const subject = document.getElementById('subject').value;
        const message = document.getElementById('message').value;
        const subscribeToNews = document.getElementById('newsCheck').checked;
        
        // In a real implementation, we would send the data to a server here
        // For now, we'll simulate an email being sent
        
        // Add to email list if checked
        if (subscribeToNews) {
          console.log(`Adding ${email} to newsletter list`);
          // In a real implementation, this would call an API endpoint
        }
        
        // Simulate sending a thank you email
        console.log(`Sending thank you email to ${email}`);
        
        // Display success and reset form after simulated server delay
        setTimeout(() => {
          // In a real implementation, the server would send an email with this content
          const emailContent = `
            Dear ${name},
            
            Thank you for contacting AARBAA! We've received your message and will get back to you shortly.
            
            "The road to cycling sanity is paved with separate bike paths." - AARBAA Founder
            
            We appreciate your interest in our cause and look forward to fighting together for sensible road infrastructure.
            
            Best regards,
            The AARBAA Team
          `;
          
          console.log('Email content:', emailContent);
          
          // Reset form and show success message
          contactForm.reset();
          successMessage.classList.remove('d-none');
          
          // Hide success message after 5 seconds
          setTimeout(() => {
            successMessage.classList.add('d-none');
          }, 5000);
        }, 1000);
      });
    }
  });
</script>
